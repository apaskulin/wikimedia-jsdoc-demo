<!DOCTYPE html>
<!--[if lte IE 8 ]><html lang="en" class="js-off lte-ie8"><![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="js-off ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="js-off">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Module: mediawiki.storage, MediaWiki frontend code, JSDoc</title>
    <script>
document.documentElement.className = document.documentElement.className.replace(/\bjs-off\b/,'js-on'); // no BEM notation thx to IE
    </script>
    <!--[if lt IE 9]>
      <script>window.html5={'shivCSS':false};</script>
      <script src="wmf/js/vendor/ie/html5shiv-3.7.3.min.js"></script>
      <script src="wmf/js/vendor/ie/respond-1.4.2.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="styles/jsdoc-wmf-theme.css">
    <script src="scripts/lib/prettify/prettify.js"> </script>
    <script src="scripts/lib/prettify/lang-css.js"> </script>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link rel="preload" href="wmf/fonts/Charter_regular.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="preload" href="wmf/fonts/Lato_regular.woff2" as="font" type="font/woff2" crossorigin="">
    <script src="scripts/fonts-loader.js" async=""></script>
</head>

<body class="page--home">
	<header id="header" class="header" role="banner">
		<div class="content-box">
			<a href="#content" class="is-aural is-focusable">Jump to content</a>
			<a href="#nav--main" class="is-aural is-focusable">Jump to navigation</a>
			<div class="header__title">
				<span class="site-title"><a href="./"><span class="site-logo"></span>MediaWiki frontend code</a></span>
				<label class="btn--nav-main" for="trigger--nav-main" aria-hidden="true" title="Show main menu">
					<i></i> <span>Menu</span>
				</label>
			</div>
     		<div id="search-container" class="search-container">
  <input type="search" id="lunr-search" class="search-input" role="combobox" aria-autocomplete="list" aria-controls="search-results" aria-expanded="false" aria-activedescendant="selected-search-result" placeholder="Search">
  <ul id="search-results" class="search-results role="listbox"></ul>
</div>
<script src="lunr-data.js"></script>
<script src="scripts/lib/lunr.js"></script>
<script src="scripts/lunrSearch.js"></script>

		</div>
	</header>
	<div class="page">
		<div class="content-box flex-cols">
			<div class="flex-col flex-col--start">
				<input type="checkbox" id="trigger--nav-main" class="trigger--nav-main">
				<nav id="nav--main" class="nav nav--main" role="navigation">
					<ol><li class="nav__item"><a href="index.html">Home</a></li><li class="nav__item is-on"><a href="modules.html">Modules</a><ul class="nav__sub-items"><li class="nav__sub-item"><a href="module-mediawiki.ForeignApi.html">mediawiki.ForeignApi</a></li><li class="nav__sub-item"><a href="module-mediawiki.String.html">mediawiki.String</a></li><li class="nav__sub-item"><a href="module-mediawiki.libs.jpegmeta.html">mediawiki.libs.jpegmeta</a></li><li class="nav__sub-item"><a href="module-mediawiki.libs.pluralruleparser.html">mediawiki.libs.pluralruleparser</a></li><li class="nav__sub-item"><a href="module-mediawiki.notification.convertmessagebox.html">mediawiki.notification.convertmessagebox</a></li><li class="nav__sub-item"><a href="module-mediawiki.page.preview.html">mediawiki.page.preview</a></li><li class="nav__sub-item"><a href="module-mediawiki.page.ready.html">mediawiki.page.ready</a></li><li class="nav__sub-item"><a href="module-mediawiki.page.watch.ajax.html">mediawiki.page.watch.ajax</a></li><li class="nav__sub-item is-on"><a href="module-mediawiki.storage.html">mediawiki.storage</a></li><li class="nav__sub-item"><a href="module-mediawiki.util.html">mediawiki.util</a></li><li class="nav__sub-item"><a href="module-mediawiki.visibleTimeout.html">mediawiki.visibleTimeout</a></li><li class="nav__sub-item"><a href="module-mediawiki.watchstar.widgets.html">mediawiki.watchstar.widgets</a></li><li class="nav__sub-item"><a href="module-moment.html">moment</a></li></ul></li><li class="nav__item"><a href="namespaces.html">Frontend API</a><ul class="nav__sub-items"><li class="nav__sub-item"><a href="Hooks.html">Hooks</a></li><li class="nav__sub-item"><a href="jQueryPlugins.html">jQueryPlugins</a></li><li class="nav__sub-item"><a href="mw.html">mw</a></li><li class="nav__sub-item"><a href="window.html">window</a></li></ul></li><li class="nav__item"><a href="sitemap.html">Sitemap</a></li></ol>
				</nav>
			</div>
			<div class="flex-col flex-col--end">
				<main id="content" class="content" role="main">

    




<section>

<header>
    
    <h1>mediawiki.storage</h1>
    
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>A safe interface to HTML5 <code>localStorage</code> and <code>sessionStorage</code>.</p>
<p>This normalises differences across browsers and silences any and all
exceptions that may occur.</p>
<p><strong>Note</strong>: Storage keys are not automatically prefixed in relation to
MediaWiki and/or the current wiki. Always <strong>prefix your keys</strong> with &quot;mw&quot; to
avoid conflicts with gadgets, JavaScript libraries, browser extensions,
internal CDN or webserver cookies, and third-party applications that may
be embedded on the page.</p>
<p><strong>Warning</strong>: This API has limited storage space and does not use an expiry
by default. This means unused <strong>keys are stored forever</strong>, unless you
opt-in to the <code>expiry</code> parameter or otherwise make sure that your code
can rediscover and delete keys you created in the past.</p>
<p>If you don't use the <code>expiry</code> parameter, avoid keys with variable
components as this leads to untracked keys that your code has no way
to know about and delete when the data is no longer needed. Instead,
store dynamic values in an object under a single constant key that you
manage or replace over time.
See also <a href="https:%5C/%5C/phabricator.wikimedia.org/T121646">https://phabricator.wikimedia.org/T121646</a>.</p></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="mediawiki.storage_index.js.html">mediawiki.storage/index.js</a>, <a href="mediawiki.storage_index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
            <h2>Examples</h2>
            
    <pre class="prettyprint"><code>mw.storage.set( key, value, expiry );
mw.storage.set( key, value ); // stored indefinitely
mw.storage.get( key );</code></pre>

    <pre class="prettyprint"><code>var local = require( 'mediawiki.storage' ).local;
local.set( key, value, expiry );
local.get( key );</code></pre>

    <pre class="prettyprint"><code>mw.storage.session.set( key, value );
mw.storage.session.get( key );</code></pre>

    <pre class="prettyprint"><code>var session = require( 'mediawiki.storage' ).session;
session.set( key, value );
session.get( key );</code></pre>

        
    
    </div>

    

    

    
        <h2 class="subsection-title">Classes</h2>

        <dl>
            <dt><a href="module-mediawiki.storage-SafeStorage.html">SafeStorage</a></dt>
            <dd></dd>
        </dl>
    

    

    

    

    
        <h2 class="subsection-title">Properties</h2>

        
            
<div class="member  member--has-toggle-box">

<details id="toggle-.local" class="toggle-box">
    <summary>
        <h3 class="name" id=".local">
            local<span class="type-signature"> :<a href="module-mediawiki.storage-SafeStorage.html">SafeStorage</a></span><span class="type-signature"><span class="type-signature__attrib type-signature__attrib--static">static</span></span>
            <a href="#.local">#</a>
        </h3>
    </summary>

    <div class="long">
    
    <div class="description">
        <p>A safe interface to HTML5 <code>localStorage</code>.</p>
    </div>
    

    

    
        <h4>Type:</h4>
        <ul>
            <li>
                
<span class="param-type">
	 <a href="module-mediawiki.storage-SafeStorage.html">SafeStorage</a>
</span>



            </li>
        </ul>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="mediawiki.storage_index.js.html">mediawiki.storage/index.js</a>, <a href="mediawiki.storage_index.js.html#line77">line 77</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    </div>
</details>

<div class="summary">
    A safe interface to HTML5 <code>localStorage</code>.
</div>

</div>

        
            
<div class="member  member--has-toggle-box">

<details id="toggle-.session" class="toggle-box">
    <summary>
        <h3 class="name" id=".session">
            session<span class="type-signature"> :<a href="module-mediawiki.storage-SafeStorage.html">SafeStorage</a></span><span class="type-signature"><span class="type-signature__attrib type-signature__attrib--static">static</span></span>
            <a href="#.session">#</a>
        </h3>
    </summary>

    <div class="long">
    
    <div class="description">
        <p>A safe interface to HTML5 <code>sessionStorage</code>.</p>
<p><strong>Note</strong>: Data persisted via <code>sessionStorage</code> will persist for the lifetime
of the browser <em>tab</em>, not the browser <em>window</em>.
For longer-lasting persistence across tabs, refer to mw.storage or mw.cookie instead.</p>
    </div>
    

    

    
        <h4>Type:</h4>
        <ul>
            <li>
                
<span class="param-type">
	 <a href="module-mediawiki.storage-SafeStorage.html">SafeStorage</a>
</span>



            </li>
        </ul>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="mediawiki.storage_index.js.html">mediawiki.storage/index.js</a>, <a href="mediawiki.storage_index.js.html#line88">line 88</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    </div>
</details>

<div class="summary">
    A safe interface to HTML5 <code>sessionStorage</code>.
</div>

</div>

        
    

    

    

    
</article>

</section>




				</main>
			</div>
		</div>
	</div>
	<footer id="footer" class="footer">
		<div class="content-box">
			<ul class="footer__list">
				<li><a href="https://gerrit.wikimedia.org/g/mediawiki/core/">Contribute</a></li>
			</ul>
			<p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Mon Mar 25 2024 13:41:33 GMT-0700 (Pacific Daylight Time)</p>
			<p><a href="https://wikimediafoundation.org/" class="lnk--wikimedia-project">A Wikimedia Foundation project</a></p>
		</div>
	</footer>

<script src="scripts/redirect.js"></script>
<script>
var arr = function(aa) { return Array.prototype.slice.call(aa); };
arr(document.querySelectorAll("nav > ol > li a:not([href])")).map(function(el) {
  var li = el;
  while (li && li.tagName !== 'LI') { li = li.parentNode; }
  el.addEventListener('click', function(event) {
    if (li.classList.contains('is-on')) {
      li.classList.remove('is-on');
      return;
    }
    arr(document.querySelectorAll("nav li.nav__item.is-on")).map(function(el2) {
      el2.classList.remove('is-on');
    });
    li.classList.add('is-on');
  });
});
</script>
<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/open-member.js"> </script>
</body>
</html>